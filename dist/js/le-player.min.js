!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b){"use strict";function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function d(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function i(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:i(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(a){var b=function(b,i){var j="backward",k="divider",l="download",m="forward",n="fullscreen",o="play",p="rate",q="source",r="subtitle",s="timeline",t="volume",u={volume:{"default":.4,mutelimit:.05}},v=a.extend(!0,{autoplay:!1,height:"auto",loop:!1,muted:!1,preload:"metadata",poster:null,width:"auto",rate:{step:.25,min:.5,max:4},playback:{step:{"short":5,medium:30,"long":60}},volume:{step:.1},controls:{common:[["play","volume","divider","timeline","divider","fullscreen"],["rate","divider","backward","divider","source","divider","subtitle","divider","download"]],fullscreen:[["play","volume","divider","timeline","divider","rate","divider","backward","divider","source","divider","subtitle","divider","download","divider","fullscreen"]]}},i),w=function(){function a(){e(this,a)}return h(a,null,[{key:"enabled",value:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen)}},{key:"hideElements",value:function(){R.removeClass("fullscreen"),Q.fullscreen.hide(),Q.common.show(),Q.mini.hide()}},{key:"init",value:function(){this.enabled()&&(document.addEventListener("fullscreenchange",function(b){a.toggleElements(!(!document.fullScreen&&!document.fullscreenElement))},!1),document.addEventListener("webkitfullscreenchange",function(b){a.toggleElements(!!document.webkitIsFullScreen)},!1),document.addEventListener("mozfullscreenchange",function(){a.toggleElements(!!document.mozFullScreen)},!1),document.addEventListener("msfullscreenchange",function(){a.toggleElements(!!document.msFullscreenElement)},!1))}},{key:"is",value:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}},{key:"showElements",value:function(){R.addClass("fullscreen"),Q.fullscreen.show(),Q.common.hide(),Q.mini.hide()}},{key:"toggle",value:function(){if(this.is())document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.hideElements();else{var a=R[0];a.requestFullScreen?a.requestFullScreen():a.webkitRequestFullScreen?a.webkitRequestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msExitFullscreen&&a.msRequestFullscreen(),this.showElements()}}},{key:"toggleElements",value:function(a){a?this.showElements():this.hideElements(),Z()}}]),a}(),x=function(){function b(a){e(this,b),this._ctx=a,this._video=a[0],this.subtitles=[],this.playbackRate=this._video.playbackRate}return h(b,[{key:"decreaseRate",value:function(){this._video.playbackRate>v.rate.min&&(this._video.playbackRate-=v.rate.step,Q.rate=this._video.playbackRate)}},{key:"increaseRate",value:function(){this._video.playbackRate<v.rate.max&&(this._video.playbackRate+=v.rate.step,Q.rate=this._video.playbackRate)}},{key:"init",value:function(){this._initSubtitles(),this._initVideo(),this._initRate()}},{key:"togglePlay",value:function(){!this._video.played||this._video.paused?this.play():this.pause()}},{key:"seek",value:function(a){this._video.currentTime=a}},{key:"play",value:function(){return S.hide(),Q.play(),this._video.play()}},{key:"pause",value:function(){return S.show(),Q.pause(),this._video.pause()}},{key:"_initRate",value:function(){this._video.playbackRate=L.get("rate",1),Q.rate=this._video.playbackRate}},{key:"_initSubtitles",value:function(){var b=this;this._ctx.children('track[kind="subtitles"]').each(function(){var c=a(this).attr("srclang"),d=a(this).attr("label"),e=a(this).attr("src");d.length>0&&e.length>0&&b.subtitles.push({title:d,src:e,language:c})})}},{key:"_initVideo",value:function(){var a=this;this._video.readyState>HTMLMediaElement.HAVE_NOTHING?this._initVideoEvent():this._video.onloadedmetadata=function(){a._initVideoEvent()}}},{key:"_initVideoEvent",value:function(){var b=this,c=a(this._video);if(Z(),R.css("width",this._video.clientWidth+"px"),c.on({timeupdate:function(){Q.moveTimeMarker()},ended:function(){b.pause()}}),0==this._video.textTracks.length&&this.subtitles.length>0){this._ctx.children('track[kind="subtitles"]').remove();for(var d in this.subtitles)this.subtitles.hasOwnProperty(d)&&this._ctx.append(a("<track/>").attr("label",this.subtitles[d].title).attr("src",this.subtitles[d].src).attr("srclang",this.subtitles[d].language).attr("id",this.subtitles[d].language).attr("kind","subtitles"))}w.init(),Q.init()}},{key:"currentTime",get:function(){return this._video.currentTime}},{key:"duration",get:function(){return this._video.duration}},{key:"height",get:function(){return this._video.clientHeight}},{key:"rate",get:function(){return this._video.playbackRate},set:function(a){this._video.playbackRate=a}},{key:"width",get:function(){return this._video.clientWidth}},{key:"source",set:function(a){var b=this._video.currentTime,c=this._video.playbackRate,d=!this._video.played||this._video.paused;this._ctx.attr("src",a),this._video=this._ctx[0],this._video.playbackRate=c,this._video.currentTime=b,d?this.pause():this.play(),setTimeout(function(){Z()},100)}},{key:"track",set:function(a){for(var b=0;b<this._video.textTracks.length;b++)this._video.textTracks[b].language==a?this._video.textTracks[b].mode="showing":this._video.textTracks[b].mode="hidden"}},{key:"volume",set:function(a){this._video.volume=a,this._video.mute=a<u.volume.mutelimit}}]),b}(),y=function(){function b(c,d){e(this,b),this.element=a("<div />").addClass("control "+c).append(a("<i />").addClass("fa fa-"+d))}return h(b,null,[{key:"divider",value:function(){return a("<div />").addClass("divider")}},{key:"create",value:function(a){switch(a){case j:return new B;case k:return this.divider();case l:return new C;case m:return new D;case n:return new E;case o:return new F;case p:return new G;case q:return new H;case r:return new I;case s:return new J;case t:return new K;default:return null}}}]),b}(),z=function(){function b(c){e(this,b),this.element=a("<div />").addClass("control-text "+c)}return h(b,[{key:"text",set:function(a){this.element.html(a)}}]),b}(),A=function(){function b(c){e(this,b);var d=this;this.iconClass=c,this.icon=a("<div />").addClass("control-icon").append(a("<i />").addClass("fa fa-"+c)),this.listElement=a("<div/>").addClass("control-inner"),this.element=a("<div />").addClass("control control-container").append(this.icon).append(this.listElement),this._index=0,this.list=[],this.icon.click(function(){d.onContainerClick()})}return h(b,[{key:"addItem",value:function(b,c){var d=this,e=a("<div />").addClass("inner-item").data("index",this._index).html(b).click(function(){d.onItemClick(a(this).data("index"))});if("object"==("undefined"==typeof c?"undefined":g(c)))for(var f in c)e.data(f,c[f]);return this._index++,this.list.push(e),this.listElement.append(e),e}},{key:"disable",value:function(){this.element.addClass("disabled")}},{key:"getByIndex",value:function(a){for(var b in this.list)if(this.list[b].data("index")==a)return this.list[b];return null}},{key:"onContainerClick",value:function(){}},{key:"onItemClick",value:function(a){this.active=a}},{key:"active",get:function(){for(var a in this.list)if(this.list[a].hasClass("active"))return this.list[a];return null},set:function(b){var c=!1;for(var d in this.list)this.list[d].data("index")==b?(this.list[d].addClass("active"),this.icon.html(this.list[d].html()),c=!0):this.list[d].removeClass("active");c||this.icon.html(a("<i />").addClass("fa fa-"+this.iconClass))}}]),b}(),B=function(a){function b(){e(this,b);var a=c(this,Object.getPrototypeOf(b).call(this,"backward","undo"));return a.element.click(function(a){P.currentTime-v.playback.step.medium>0?P.seek(P.currentTime-v.playback.step.medium):P.seek(0)}),a}return d(b,a),b}(y),C=function(b){function f(){e(this,f);var b=c(this,Object.getPrototypeOf(f).call(this,"",""));return b.element=a("<a />").attr("href","").attr("target","_blank").attr("download","").addClass("control download").append(a("<i />").addClass("fa fa-download")),b}return d(f,b),h(f,[{key:"link",set:function(a){this.element.attr("href",a)}}]),f}(y),D=function(a){function b(){return e(this,b),c(this,Object.getPrototypeOf(b).call(this,"forward","redo"))}return d(b,a),b}(y),E=function(a){function b(){e(this,b);var a=c(this,Object.getPrototypeOf(b).call(this,"fullscreen","arrows-alt"));return a.element.click(function(a){w.toggle()}),a}return d(b,a),b}(y),F=function(a){function b(){e(this,b);var a=c(this,Object.getPrototypeOf(b).call(this,"play","play"));return a.element.click(function(a){P.togglePlay()}),a}return d(b,a),h(b,[{key:"pause",value:function(){this.element.children(".fa").removeClass("fa-pause").addClass("fa-play")}},{key:"play",value:function(){this.element.children(".fa").removeClass("fa-play").addClass("fa-pause")}}]),b}(y),G=function(){function b(){e(this,b),this.down=new y("rate-down","backward"),this.up=new y("rate-up","forward"),this.current=new z("rate-current"),this.down.element.click(function(a){P.decreaseRate()}),this.up.element.click(function(a){P.increaseRate()}),this.element=a("<div />").addClass("control-container").append(this.down.element).append(this.current.element).append(this.up.element)}return h(b,[{key:"set",value:function(a){this.up.element.removeClass("disabled"),this.down.element.removeClass("disabled"),P.rate<=v.rate.min?this.down.element.addClass("disabled"):P.rate>=v.rate.max&&this.up.element.addClass("disabled"),this.show()}},{key:"show",value:function(){this.current.text="Ã—"+P.rate.toFixed(2).toString().replace(",",".")}}]),b}(),H=function(a){function b(){e(this,b);var a=c(this,Object.getPrototypeOf(b).call(this,"bullseye"));if(O.length>1)for(var d in O)a.addItem(O[d].title,{src:O[d].src});else a.disable();return a}return d(b,a),h(b,[{key:"set",value:function(a){var b=this.getByIndex(a);null!=b&&(P.source=b.data("src"),Q.download=b.data("src"))}},{key:"onItemClick",value:function(a){f(Object.getPrototypeOf(b.prototype),"onItemClick",this).call(this,a),this.set(a)}}]),b}(A),I=function(a){function b(){return e(this,b),c(this,Object.getPrototypeOf(b).call(this,"commenting-o"))}return d(b,a),h(b,[{key:"init",value:function(){if(P.subtitles.length>0){for(var a in P.subtitles)if(P.subtitles.hasOwnProperty(a)){var b=P.subtitles[a];this.addItem(b.title,{src:b.src,language:b.language})}}else this.disable()}},{key:"onContainerClick",value:function(){f(Object.getPrototypeOf(b.prototype),"onContainerClick",this).call(this),this.onItemClick(-1)}},{key:"onItemClick",value:function(a){f(Object.getPrototypeOf(b.prototype),"onItemClick",this).call(this,a);var c=this.getByIndex(a);null!=c?P.track=c.data("language"):P.track=-1}}]),b}(A),J=function(){function b(){var c=this;e(this,b);var d=P.duration;this.drag=!1,this.current=new z("time-current"),this.total=new z("time-total"),this.marker=a("<div />").addClass("time-marker"),this.markerShadow=a("<div />").addClass("time-marker shadow").append().hide(),this.markerShadowTime=a("<div />").addClass("time"),this.markerTime=a("<div />").addClass("time").hide(),this.played=a("<div />").addClass("time-played"),this.current.text="00:00",this.line=a("<div />").addClass("timeline").append(this.marker.append(this.markerTime)).append(this.markerShadow.append(this.markerShadowTime)).append(this.played).on({mousemove:function(a){if(!c.drag){var b=c.getPosition(a.pageX);b>0&&1>b?(c.markerShadow.show(),c.markerShadow.css("left",100*b+"%"),c.markerShadowTime.html(Y(d*b))):c.markerShadow.hide()}},mouseleave:function(a){c.drag||c.markerShadow.hide()},click:function(a){c.drag||P.seek(P.duration*c.getPosition(a.pageX))}}),this.element=a("<div />").addClass("timeline-container").append(a("<div />").addClass("timeline-subcontainer").append(this.current.element).append(this.line).append(this.total.element)),this.marker.on("mousedown",function(a){1==a.which&&(c.markerShadow.hide(),c.drag=!0)}),a(document).on({mousemove:function(a){if(c.drag){var b=c.getPosition(a.pageX);b>0&&1>b&&(c.markerTime.show().html(Y(d*b)),P.seek(d*b))}},mouseup:function(a){c.markerTime.hide(),c.drag=!1}})}return h(b,[{key:"getPosition",value:function(a){return(a-this.line.offset().left)/this.line.width()}},{key:"move",value:function(){var a=(P.currentTime/P.duration*100).toFixed(2);100==a&&Q.pause(),this.marker.css("left",a+"%"),this.played.css("width",a+"%"),this.current.text=Y(P.currentTime)}}]),b}(),K=function(){function b(){var c=this;e(this,b);var d=this;this.icon=a("<div/>").addClass("control-icon").append(a("<i />").addClass("fa fa-volume-down")).click(function(){d.toggleMuted()}),this.marker=a("<div/>").addClass("volume-marker"),this.active=a("<div/>").addClass("volume-active"),this.line=a("<div/>").addClass("volume-line").append(this.active).append(this.marker).on("click",function(a){if(!c.drag){var b=c.getPosition(a.pageY);b>=0&&1>=b&&(Q.volume=1-b)}}),this.element=a("<div />").addClass("control control-container").append(this.icon).append(a("<div />").addClass("control-inner volume-slider").append(this.line)),this.drag=!1,this.marker.on("mousedown",function(a){1==a.which&&(c.drag=!0)}),a(document).on({mousemove:function(a){if(c.drag){var b=c.getPosition(a.pageY);b>=0&&1>=b&&(Q.volume=1-b)}},mouseup:function(a){c.drag=!1}})}return h(b,[{key:"toggleMuted",value:function(){1==P.muted?this.value=L.get("volume",u.volume["default"]):this.value=0}},{key:"getPosition",value:function(a){return(a-this.line.offset().top)/this.line.height()}},{key:"value",set:function(a){var b=this.icon.children(".fa").eq(-1);b.removeClass(),a<u.volume.mutelimit?b.addClass("fa fa-volume-off"):.5>a?b.addClass("fa fa-volume-down"):b.addClass("fa fa-volume-up");var c=Math.round(100*a).toString()+"%";this.active.css("height",c),this.marker.css("bottom",c)}}]),b}(),L=function(){function a(){e(this,a)}return h(a,null,[{key:"get",value:function(a,b){var c=document.cookie.split(";");for(var d in c){var e=c[d].trim().split("=");if(e[0]=="leplayer_"+a)return e[1]}return b}},{key:"set",value:function(a,b){var c=new Date;c.setDate(c.year+1),document.cookie="leplayer_"+a+"="+b+";expires="+c.toString()}}]),a}(),M=function(){function a(b,c){e(this,a),this.items=[],this.active=c||!1,this.name=b}return h(a,[{key:"add",value:function(a){return a==k?y.create(a):(this.items[a]=y.create(a),this.items[a].element)}},{key:"has",value:function(a){return"object"==g(this.items[a])}},{key:"hide",value:function(){R.find(".controls-"+this.name).hide()}},{key:"init",value:function(){this.volume=L.get("volume",u.volume["default"]),this.initTimeline(),this.totalTime=Y(P.duration),this.download=O[0].src,this.initSubtitles()}},{key:"initSubtitles",value:function(){this.has(r)&&this.items[r].init()}},{key:"initTimeline",value:function(){this.has(s)&&this.items.timeline.element.width()<20&&this.items.timeline.element.hide()}},{key:"moveTimeMarker",value:function(){this.has(s)&&this.items.timeline.move()}},{key:"pause",value:function(){this.has(o)&&this.items.play.pause()}},{key:"play",value:function(){this.has(o)&&this.items.play.play()}},{key:"show",value:function(){R.find(".controls-"+this.name).show()}},{key:"download",set:function(a){this.has(l)&&(this.items.download.link=a)}},{key:"rate",set:function(a){this.has(p)&&this.items.rate.set(a)}},{key:"source",set:function(a){this.has(q)&&this.items.source.set(a)}},{key:"totalTime",set:function(a){this.has(s)&&(this.items.timeline.total.text=a)}},{key:"volume",set:function(a){this.has(t)&&(this.items.volume.value=a)}}]),a}(),N=function(){function a(){e(this,a),this.collections={common:new M("common"),mini:new M("mini"),fullscreen:new M("fullscreen")},this.collections.common.active=!0}return h(a,[{key:"has",value:function(a){return"object"==g(this.collections[a])}},{key:"init",value:function(){for(var a in this.collections)this.collections[a].init();this.collections.common.show(),this.collections.mini.hide(),this.collections.fullscreen.hide()}},{key:"moveTimeMarker",value:function(){for(var a in this.collections)this.collections[a].moveTimeMarker()}},{key:"pause",value:function(){for(var a in this.collections)this.collections[a].pause()}},{key:"play",value:function(){for(var a in this.collections)this.collections[a].play()}},{key:"common",get:function(){return this.collections.common}},{key:"fullscreen",get:function(){return this.collections.fullscreen}},{key:"mini",get:function(){return this.collections.mini}},{key:"download",set:function(a){for(var b in this.collections)this.collections[b].download=a}},{key:"rate",set:function(a){L.set("rate",a);for(var b in this.collections)this.collections[b].rate=a}},{key:"source",set:function(a){for(var b in this.collections)this.collections[b].source=a}},{key:"totalTime",set:function(a){for(var b in this.collections)this.collections[b].totalTime=a}},{key:"volume",set:function(a){for(var b in this.collections)this.collections[b].volume=a;P.volume=a,L.set("volume",a)}}]),a}(),O=[],P=(u.volume["default"],null),Q=new N,R=null,S=null,T=function(){if("video"!=b.prop("tagName").toLowerCase())return console.warn("Incorrect element selected."),this;if(b.children("source").each(function(){var b=a(this).attr("src");b&&O.push({src:b,title:a(this).attr("title")})}),0==O.length){var c=b.attr("src");c&&O.push({src:c,title:a(this).attr("title")||"default"})}return 0==O.length?(console.warn("No sources found."),this):(P=new x(b),X(),V(),U(),P.init(),void W())},U=function(){for(var b in v.controls)if(Q.has(b))for(var c in v.controls[b]){var d=v.controls[b][c],e=!1,f=a("<div />").addClass("leplayer-controls controls-"+b);for(var g in d){var h=d[g];if(h==k||!Q.collections[b].has(h)){var i=Q.collections[b].add(h);null!=i?(f.append(i),h==s&&(e=!0)):console.warn("Cannot create "+h+" control for collection "+b+".")}}e||f.css("width","1px"),f.find(".divider + .divider").remove(),R.append(f)}},V=function(){S=a("<div />").addClass("play-overlay").html('<i class="fa fa-play"></i>');var c=a("<div />").addClass("leplayer-video").append(S);R=a("<div />").addClass("leplayer-container").append(c).css("width",b.width()+"px"),b.before(R),c.append(b),S.click(function(){P.togglePlay()})},W=function(){b.keypress(function(a){32==a.charCode&&P.togglePlay()}).click(function(){P.togglePlay()})},X=function(){b.removeAttr("controls");var a=b.attr("height");a&&(v.height=a+"px",b.removeAttr("height")),b.css("height",v.height);var c=b.attr("width");c&&(v.width=c+"px",b.removeAttr("width")),b.css("width",v.width);var d=b.attr("poster");d?v.poster=d:v.poster&&b.attr("poster",v.poster);var e=["autoplay","loop","muted"];for(var f in e){var g=b.attr(e[f]);g?v[e[f]]=!0:v[e[f]]?b.attr(e[f],""):b.removeAttr(e[f]),b.prop(e[f],v[e[f]])}var h=b.attr("preload");h&&(h=h.toLowerCase(),"none"==h||"metadata"==h?v.preload=h:v.preload="auto"),b.attr("preload",v.preload)},Y=function(a){var b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=Math.floor(a%3600%60),e="";return b>0&&(e=b+":"),10>c&&(e+="0"),e+=c+":",10>d&&(e+="0"),e+=d},Z=function(){S.css("line-height",P.height+"px")};return T(),this};window.$.fn.lePlayer=function(c){return this.each(function(){b(a(this),c)})}}(jQuery)}]);